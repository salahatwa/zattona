{"version":3,"file":"ng2-adsense.umd.js","sources":["../../src/lib/adsense-config.ts","../../src/lib/adsense.component.ts","../../src/lib/adsense.module.ts","../../src/lib/ng2-adsense.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\n/**\n * Set optional global default values\n */\nexport interface AdsenseConfig {\n  /** adsense account ca-pub-XXXXXXXXXXXXXXXX */\n  adClient: string;\n  /** ad slot/number */\n  adSlot: string | number;\n  /** data-ad-format default: auto */\n  adFormat: string;\n  /** ins element display style */\n  display: string;\n  /** ins element height in px */\n  width: number;\n  /** ins element width in px */\n  height: number;\n  /** used for in-feed ads */\n  layout: string;\n  /** used for in-feed ads */\n  layoutKey: string;\n  /** enable page-level ads */\n  pageLevelAds: boolean;\n  adtest: string;\n  /** used for flexible ads */\n  fullWidthResponsive: boolean;\n}\n\nexport const ADSENSE_TOKEN = new InjectionToken<AdsenseConfig>(\n  'AdsenseConfig',\n);\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ElementRef,\n  PLATFORM_ID,\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { ADSENSE_TOKEN, AdsenseConfig } from './adsense-config';\n\n@Component({\n  selector: 'ng2-adsense,ng-adsense',\n  template: `\n    <ins\n      #ins\n      class=\"adsbygoogle {{ className }}\"\n      [style.display]=\"display\"\n      [style.width.px]=\"width\"\n      [style.height.px]=\"height\"\n      [attr.data-ad-client]=\"adClient\"\n      [attr.data-ad-slot]=\"adSlot\"\n      [attr.data-ad-format]=\"adFormat\"\n      [attr.data-ad-region]=\"adRegion\"\n      [attr.data-layout]=\"layout\"\n      [attr.data-adtest]=\"adtest\"\n      [attr.data-layout-key]=\"layoutKey\"\n      [attr.data-full-width-responsive]=\"fullWidthResponsive\"\n    >\n    </ins>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AdsenseComponent implements OnInit, AfterViewInit, OnDestroy {\n  /** adsense account ca-pub-XXXXXXXXXXXXXXXX */\n  @Input() adClient!: string;\n  /** ad slot/number */\n  @Input() adSlot!: string | number;\n  @Input() adFormat!: string;\n  /** can be manually set if you need all ads on a page to have same id page-xxx */\n  @Input() adRegion = 'page-' + Math.floor(Math.random() * 10000) + 1;\n  /** ins element display style */\n  @Input() display!: string;\n  /** ins element height in px */\n  @Input() width!: number;\n  /** ins element width in px */\n  @Input() height!: number;\n  /** used for in-feed ads */\n  @Input() layout!: string;\n  /** used for in-feed ads */\n  @Input() layoutKey!: string;\n  /** enable page-level ads */\n  @Input() pageLevelAds!: boolean;\n  /** sets up some sort of google test ad */\n  @Input() adtest!: string;\n  /* used for flexible ads */\n  @Input() fullWidthResponsive!: boolean;\n  /**\n   * classes applied to the ins element\n   */\n  @Input() className = '';\n  @ViewChild('ins', { read: ElementRef, static: true }) ins!: ElementRef;\n\n  constructor(\n    @Inject(ADSENSE_TOKEN) private config: AdsenseConfig,\n    // tslint:disable-next-line:no-any\n    @Inject(PLATFORM_ID) private platform: any,\n  ) {}\n\n  ngOnInit(): void {\n    const config = this.config;\n    this.adClient = this.adClient ?? config.adClient;\n    this.adSlot = this.adSlot ?? config.adSlot;\n    this.adFormat = this.adFormat ?? config.adFormat ?? 'auto';\n    this.display = this.display ?? config.display ?? 'block';\n    this.width = this.width ?? config.width;\n    this.height = this.height ?? config.height;\n    this.layout = this.layout ?? config.layout;\n    this.layoutKey = this.layoutKey ?? config.layoutKey;\n    this.pageLevelAds = this.pageLevelAds ?? config.pageLevelAds;\n    this.adtest = this.adtest ?? config.adtest;\n    this.fullWidthResponsive = this.fullWidthResponsive ?? config.fullWidthResponsive;\n  }\n  ngOnDestroy(): void {\n    const iframe = this.ins.nativeElement.querySelector('iframe');\n    if (iframe && iframe.contentWindow) {\n      iframe.src = 'about:blank';\n      iframe.remove();\n    }\n  }\n\n  ngAfterViewInit(): void {\n    if (isPlatformBrowser(this.platform)) {\n      this.push();\n    }\n  }\n\n  push(): void {\n    const p: Record<string, string | boolean> = {};\n    if (this.pageLevelAds) {\n      p.google_ad_client = this.adClient;\n      p.enable_page_level_ads = true;\n    }\n\n    if (window) {\n      try {\n        // tslint:disable-next-line:no-any\n        ((window as any).adsbygoogle = (window as any).adsbygoogle || []).push(p);\n      } catch {\n        // pass\n      }\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\n\nimport { AdsenseConfig, ADSENSE_TOKEN } from './adsense-config';\nimport { AdsenseComponent } from './adsense.component';\n\n@NgModule({\n  imports: [CommonModule],\n  exports: [AdsenseComponent],\n  declarations: [AdsenseComponent],\n})\nexport class AdsenseModule {\n  static forRoot(config: Partial<AdsenseConfig> = {}): ModuleWithProviders<AdsenseModule> {\n    return {\n      ngModule: AdsenseModule,\n      providers: [{ provide: ADSENSE_TOKEN, useValue: config }],\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["InjectionToken","isPlatformBrowser","Component","ChangeDetectionStrategy","Inject","PLATFORM_ID","Input","ViewChild","ElementRef","NgModule","CommonModule"],"mappings":"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"}